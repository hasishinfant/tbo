import{j as e}from"./query-Btr53e-p.js";import{r as s,e as a,u as i}from"./router-CHgP5jf5.js";import{I as r}from"./itinerary-features-BuGSlWnx.js";import{B as t,L as n}from"./destination-features-rioVTb2Z.js";import{i as c,d as o,a as l}from"./index-2aN4M2Md.js";import"./trip-planner-features-Cy4avEMv.js";import"./axios-B1ATcuf8.js";const d=({onChatWithAssistant:s,onSaveTrip:a,isSaving:i=!1})=>e.jsxs("div",{className:"action-buttons space-x-4",children:[e.jsx(t,{variant:"primary",icon:"chat",onClick:s,className:"chat-button",size:"lg",children:"Chat with Travel Assistant"}),e.jsx(t,{variant:"secondary",icon:"heart",onClick:a,disabled:i,loading:i,className:"save-button",size:"lg",children:i?"Saving Trip...":"Save Trip"})]}),m=({destination:a,onClose:i,onBook:r})=>{const[t,n]=s.useState({checkIn:"",checkOut:"",guests:2,roomType:"standard"}),c={standard:120,deluxe:180,suite:280},o=()=>{if(!t.checkIn||!t.checkOut)return 0;const e=new Date(t.checkIn),s=new Date(t.checkOut),a=Math.ceil((s.getTime()-e.getTime())/864e5);if(a<=0)return 0;return c[t.roomType]*a},l=e=>{n({...t,[e.target.name]:e.target.value})},d=o(),m=t.checkIn&&t.checkOut?Math.ceil((new Date(t.checkOut).getTime()-new Date(t.checkIn).getTime())/864e5):0;return e.jsx("div",{className:"booking-modal-overlay",onClick:i,children:e.jsxs("div",{className:"booking-modal",onClick:e=>e.stopPropagation(),children:[e.jsx("button",{className:"modal-close",onClick:i,children:"√ó"}),e.jsxs("div",{className:"booking-header",children:[e.jsx("h2",{children:"Book Your Stay"}),e.jsxs("p",{className:"booking-destination",children:["üìç ",a]})]}),e.jsxs("form",{onSubmit:e=>{e.preventDefault();const s={destination:a,checkIn:t.checkIn,checkOut:t.checkOut,guests:t.guests,roomType:t.roomType,totalPrice:o()};r(s)},className:"booking-form",children:[e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"checkIn",children:"Check-in Date"}),e.jsx("input",{type:"date",id:"checkIn",name:"checkIn",value:t.checkIn,onChange:l,min:(new Date).toISOString().split("T")[0],required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"checkOut",children:"Check-out Date"}),e.jsx("input",{type:"date",id:"checkOut",name:"checkOut",value:t.checkOut,onChange:l,min:t.checkIn||(new Date).toISOString().split("T")[0],required:!0})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"guests",children:"Number of Guests"}),e.jsx("input",{type:"number",id:"guests",name:"guests",value:t.guests,onChange:l,min:"1",max:"10",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"roomType",children:"Room Type"}),e.jsxs("select",{id:"roomType",name:"roomType",value:t.roomType,onChange:l,required:!0,children:[e.jsx("option",{value:"standard",children:"Standard Room - $120/night"}),e.jsx("option",{value:"deluxe",children:"Deluxe Room - $180/night"}),e.jsx("option",{value:"suite",children:"Suite - $280/night"})]})]})]}),e.jsxs("div",{className:"booking-summary",children:[e.jsx("h3",{children:"Booking Summary"}),e.jsxs("div",{className:"summary-row",children:[e.jsx("span",{children:"Room Type:"}),e.jsx("span",{className:"summary-value",children:t.roomType.charAt(0).toUpperCase()+t.roomType.slice(1)})]}),e.jsxs("div",{className:"summary-row",children:[e.jsx("span",{children:"Guests:"}),e.jsx("span",{className:"summary-value",children:t.guests})]}),m>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"summary-row",children:[e.jsx("span",{children:"Nights:"}),e.jsx("span",{className:"summary-value",children:m})]}),e.jsxs("div",{className:"summary-row",children:[e.jsx("span",{children:"Price per night:"}),e.jsxs("span",{className:"summary-value",children:["$",c[t.roomType]]})]})]}),e.jsx("div",{className:"summary-divider"}),e.jsxs("div",{className:"summary-row summary-total",children:[e.jsx("span",{children:"Total:"}),e.jsxs("span",{className:"summary-value",children:["$",d]})]})]}),e.jsxs("div",{className:"booking-actions",children:[e.jsx("button",{type:"button",className:"btn-secondary",onClick:i,children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn-primary",disabled:0===d,children:"Confirm Booking"})]})]}),e.jsxs("div",{className:"booking-features",children:[e.jsxs("div",{className:"feature",children:[e.jsx("span",{className:"feature-icon",children:"‚úì"}),e.jsx("span",{children:"Free cancellation"})]}),e.jsxs("div",{className:"feature",children:[e.jsx("span",{className:"feature-icon",children:"‚úì"}),e.jsx("span",{children:"No prepayment needed"})]}),e.jsxs("div",{className:"feature",children:[e.jsx("span",{className:"feature-icon",children:"‚úì"}),e.jsx("span",{children:"Best price guarantee"})]})]})]})})},h=()=>{const{tripId:t}=a(),h=i(),[u,p]=s.useState(null),[g,x]=s.useState(!0),[j,f]=s.useState(!1),[v,y]=s.useState("itinerary"),[N,k]=s.useState(!1),[b,S]=s.useState("");s.useEffect(()=>{f(c())},[]),s.useEffect(()=>{(()=>{try{const e=sessionStorage.getItem("generatedItinerary");if(e){const s=JSON.parse(e);if(s.itinerary&&Array.isArray(s.itinerary)){const a=s.itinerary.map(e=>({...e,date:"string"==typeof e.date?new Date(e.date):e.date}));return p(a),localStorage.setItem("currentTrip",e),void x(!1)}}const s=localStorage.getItem("currentTrip");if(s){const e=JSON.parse(s);if(e.itinerary&&Array.isArray(e.itinerary)){const s=e.itinerary.map(e=>({...e,date:"string"==typeof e.date?new Date(e.date):e.date}));return p(s),void x(!1)}}x(!1)}catch(e){x(!1)}})()},[t]);const T=[{id:1,title:"Luxury Hotel Package",destination:u?.[0]?.places[0]?.name||"Paris",image:"https://images.unsplash.com/photo-1566073771259-6a8506099945?w=800",originalPrice:450,discountPrice:299,discount:"33% OFF",rating:4.8,reviews:1234,features:["Free Breakfast","Airport Transfer","Spa Access"]},{id:2,title:"Adventure Tour Bundle",destination:u?.[0]?.places[1]?.name||"Tokyo",image:"https://images.unsplash.com/photo-1571896349842-33c89424de2d?w=800",originalPrice:380,discountPrice:249,discount:"35% OFF",rating:4.9,reviews:856,features:["Guided Tours","All Meals","Equipment Included"]},{id:3,title:"Beach Resort Special",destination:"Bali",image:"https://images.unsplash.com/photo-1520250497591-112f2f40a3f4?w=800",originalPrice:520,discountPrice:349,discount:"33% OFF",rating:4.7,reviews:2103,features:["Ocean View","Water Sports","Sunset Dinner"]},{id:4,title:"City Explorer Pass",destination:"New York",image:"https://images.unsplash.com/photo-1542314831-068cd1dbfeeb?w=800",originalPrice:280,discountPrice:199,discount:"29% OFF",rating:4.6,reviews:1567,features:["Museum Access","City Tours","Metro Pass"]}];return g?e.jsx("div",{className:"itinerary-page",children:e.jsx(n,{size:"lg",message:"Loading your itinerary..."})}):u&&0!==u.length?e.jsxs("div",{className:"itinerary-page",children:[e.jsxs("div",{className:"page-header",children:[e.jsx("h1",{children:"Your Personalized Itinerary"}),e.jsx("p",{children:"Here's your day-by-day travel plan with recommendations"}),e.jsx("button",{className:"trip-mode-toggle "+(j?"active":""),onClick:()=>{j?(o(),f(!1)):(l(),f(!0))},children:j?"‚úì Trip Mode Active":"Start Trip Mode"})]}),e.jsxs("div",{className:"itinerary-tabs",children:[e.jsx("button",{className:"tab "+("itinerary"===v?"active":""),onClick:()=>y("itinerary"),children:"üìÖ Itinerary"}),e.jsx("button",{className:"tab "+("offers"===v?"active":""),onClick:()=>y("offers"),children:"üéÅ Special Offers"})]}),"itinerary"===v?e.jsxs(e.Fragment,{children:[e.jsx(r,{itinerary:u}),e.jsx(d,{onChatWithAssistant:()=>{h("/chat"+(t?`/${t}`:""))},onSaveTrip:()=>{try{const e=localStorage.getItem("currentTrip");if(e){const s=JSON.parse(e),a=JSON.parse(localStorage.getItem("savedTrips")||"[]");a.push({...s,savedAt:(new Date).toISOString()}),localStorage.setItem("savedTrips",JSON.stringify(a)),alert("Trip saved successfully!")}}catch(e){alert("Failed to save trip. Please try again.")}}})]}):e.jsxs("div",{className:"offers-section",children:[e.jsxs("div",{className:"offers-header",children:[e.jsx("h2",{children:"Exclusive Offers for Your Trip"}),e.jsx("p",{children:"Save big on hotels, tours, and experiences"})]}),e.jsx("div",{className:"offers-grid",children:T.map(s=>e.jsxs("div",{className:"offer-card",children:[e.jsxs("div",{className:"offer-image-container",children:[e.jsx("img",{src:s.image,alt:s.title,className:"offer-image"}),e.jsx("span",{className:"offer-badge",children:s.discount})]}),e.jsxs("div",{className:"offer-content",children:[e.jsx("h3",{children:s.title}),e.jsxs("p",{className:"offer-destination",children:["üìç ",s.destination]}),e.jsxs("div",{className:"offer-rating",children:[e.jsxs("span",{className:"stars",children:["‚≠ê ",s.rating]}),e.jsxs("span",{className:"reviews",children:["(",s.reviews," reviews)"]})]}),e.jsx("div",{className:"offer-features",children:s.features.map((s,a)=>e.jsxs("span",{className:"feature-tag",children:["‚úì ",s]},a))}),e.jsxs("div",{className:"offer-pricing",children:[e.jsxs("div",{className:"price-info",children:[e.jsxs("span",{className:"original-price",children:["$",s.originalPrice]}),e.jsxs("span",{className:"discount-price",children:["$",s.discountPrice]})]}),e.jsx("button",{className:"btn-book",onClick:()=>{return e=s.destination,S(e),void k(!0);var e},children:"Book Now"})]})]})]},s.id))})]}),N&&e.jsx(m,{destination:b,onClose:()=>k(!1),onBook:e=>{const s=JSON.parse(localStorage.getItem("bookings")||"[]");s.push({...e,bookingId:`booking-${Date.now()}`,bookedAt:(new Date).toISOString()}),localStorage.setItem("bookings",JSON.stringify(s)),k(!1),alert(`Booking confirmed for ${e.destination}!\nTotal: $${e.totalPrice}`)}})]}):e.jsx("div",{className:"itinerary-page",children:e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:"üìÖ"}),e.jsx("h2",{children:"No Itinerary Found"}),e.jsx("p",{children:"It looks like you haven't created a trip yet. Let's plan your perfect journey!"}),e.jsx("button",{className:"btn-hero btn-hero-primary",onClick:()=>h("/plan-trip"),children:"‚úàÔ∏è Plan Your Trip"})]})})};export{h as default};
//# sourceMappingURL=ItineraryPage-AaUQ51kW.js.map
